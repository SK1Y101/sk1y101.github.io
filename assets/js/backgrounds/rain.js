function RainDrop(){this.reset()}function DripDrop(){this.reset()}function RainPool(t,i){this.x=t,this.y=i,this.radius=0,this.opacity=.4}function LightningFlash(){this.timer=0,this.opacity=0}function drawLightningBolt(t,i,o=12){const e=[];let a=t,h=i;const n=h/o;for(let t=0;t<=o;t++){const i=a+50*(Math.random()-.5),o=h-n*t+10*(Math.random()-.5);e.push({x:i,y:o})}bgCtx.strokeStyle="rgba(255, 255, 255, 0.7)",bgCtx.lineWidth=2,bgCtx.beginPath(),bgCtx.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length-2;t++){const i=(e[t].x+e[t+1].x)/2,o=(e[t].y+e[t+1].y)/2;bgCtx.quadraticCurveTo(e[t].x,e[t].y,i,o)}bgCtx.stroke();for(let t=2;t<e.length-2;t++)if(Math.random()<.2){const i=e[t];drawLightningFork(i.x,i.y,4)}}function drawLightningFork(t,i,o=4){let e=t,a=i;bgCtx.strokeStyle="rgba(255, 255, 255, 0.3)",bgCtx.lineWidth=1,bgCtx.beginPath(),bgCtx.moveTo(e,a);for(let t=0;t<o;t++)e+=40*(Math.random()-.5),a+=10+20*Math.random(),bgCtx.lineTo(e,a);bgCtx.stroke()}function animate(){bgCtx.fillStyle="#110E19",bgCtx.fillRect(0,0,width,height),lightning.update();let t=bgCtx.createLinearGradient(0,0,0,height);t.addColorStop(0,"rgba(100, 80, 150, 0.1)"),t.addColorStop(1,"rgba(30, 20, 60, 0.3)"),bgCtx.fillRect(0,0,width,height),fogOffset+=.05,bgCtx.globalAlpha=.05,bgCtx.drawImage(fogCanvas,fogOffset%width-width,0),bgCtx.drawImage(fogCanvas,fogOffset%width,0),bgCtx.globalAlpha=1,bgCtx.filter="none";for(let t of entities)t.update();Math.random()<.03&&pools.push(new RainPool(Math.random()*width,height-15)),pools.forEach(t=>t.update()),pools=pools.filter(t=>t.opacity>0),requestAnimFrame(animate)}var requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};const background=document.getElementById("bgCanvas"),bgCtx=background.getContext("2d"),width=1920,height=1080;background.width=width,background.height=height,RainDrop.prototype.reset=function(){const t=.2,i=.5;this.x=width*(Math.random()*(t+1)-t),this.y=height*(Math.random()*(i+1)-i),this.length=20+20*Math.random(),this.speed=4+4*Math.random(),this.opacity=.1+.2*Math.random()},RainDrop.prototype.update=function(){this.y+=this.speed,this.x+=.3*this.speed,this.y>height&&this.reset(),this.draw()},RainDrop.prototype.draw=function(){bgCtx.beginPath(),bgCtx.moveTo(this.x,this.y),bgCtx.lineTo(this.x-2,this.y-this.length),bgCtx.strokeStyle=`rgba(255, 255, 255, ${this.opacity})`,bgCtx.lineWidth=1,bgCtx.stroke()},DripDrop.prototype.reset=function(){this.x=Math.random()*width,this.y=Math.random()*height,this.length=8+15*Math.random(),this.speed=.5+1.5*Math.random(),this.opacity=.1+.15*Math.random()},DripDrop.prototype.update=function(){this.y+=this.speed,this.y>height&&this.reset(),this.draw()},DripDrop.prototype.draw=function(){bgCtx.beginPath(),bgCtx.moveTo(this.x,this.y),bgCtx.lineTo(this.x,this.y-this.length),bgCtx.strokeStyle=`rgba(255, 255, 255, ${this.opacity})`,bgCtx.lineWidth=1,bgCtx.stroke()},RainPool.prototype.update=function(){this.radius+=.2,this.opacity-=.002,this.draw()},RainPool.prototype.draw=function(){let t=3;for(let i=0;i<t;i++){let o=this.radius*(.6+.2*i),e=this.opacity*(1-i/t),a=3*Math.sin(.5*i+.1*this.radius);bgCtx.beginPath(),bgCtx.ellipse(this.x+a,this.y,1.3*o,.7*o,0,0,2*Math.PI),bgCtx.strokeStyle=`rgba(255, 255, 255, ${e})`,bgCtx.lineWidth=1,bgCtx.stroke()}},LightningFlash.prototype.trigger=function(){this.timer=4+Math.floor(3*Math.random()),this.opacity=.15+.1*Math.random()},LightningFlash.prototype.update=function(){Math.random()<.05&&this.timer<=0&&(this.trigger(),this.forkX=Math.random()*width,this.forkY=height*(.5+.4*Math.random())),this.timer>0&&(this.draw(),drawLightningBolt(this.forkX,this.forkY),this.timer--,this.opacity*=.5+.2*Math.random())},LightningFlash.prototype.draw=function(){let t=bgCtx.createLinearGradient(0,0,width,height);t.addColorStop(0,`rgba(255, 255, 255, ${this.opacity})`),t.addColorStop(1,`rgba(255, 255, 255, ${.1*this.opacity})`),bgCtx.fillStyle=t,bgCtx.fillRect(0,0,width,height)};var fogCanvas=document.createElement("canvas");fogCanvas.width=width,fogCanvas.height=height;var fogCtx=fogCanvas.getContext("2d");for(let t=0;t<200;t++){let t=Math.random()*width,i=Math.random()*height,o=100+100*Math.random(),e=.01+.03*Math.random();fogCtx.beginPath(),fogCtx.arc(t,i,o,0,2*Math.PI),fogCtx.fillStyle=`rgba(255, 255, 255, ${e})`,fogCtx.fill()}let lightning=new LightningFlash,pools=[],entities=[],fogOffset=0;for(var i=0;i<300;i++)entities.push(new RainDrop);for(i=0;i<100;i++)entities.push(new DripDrop);animate();