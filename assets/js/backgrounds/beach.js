function today(t){var i=t.getDate(),h=t.getMonth()+1;return i<10&&(i="0"+i),h<10&&(h="0"+h),i+"/"+h}function lerp(t,i,h){return t+(i-t)*h}function drawSky(){const t=.7*height,i=bgCtx.createLinearGradient(0,0,0,t);i.addColorStop(0,"#0b0033"),i.addColorStop(.1,"#2e1a47"),i.addColorStop(.4,"#ff758c"),i.addColorStop(.7,"#ffd580"),i.addColorStop(.9,"#fff1a8"),i.addColorStop(1,"#ffe4b5"),bgCtx.fillStyle=i,bgCtx.fillRect(0,0,width,t)}function drawSea(){const t=.7*height,i=bgCtx.createLinearGradient(0,t,0,height);i.addColorStop(0,"#98f5e1"),i.addColorStop(.3,"#56cfe1"),i.addColorStop(.6,"#2d6cdf"),i.addColorStop(1,"#0b1a40"),bgCtx.fillStyle=i,bgCtx.fillRect(0,t,width,height-t)}function drawSun(){const t=width/2,i=.6*height,h=40,o=bgCtx.createRadialGradient(t,i,0,t,i,2.5*h);o.addColorStop(0,"rgba(255, 255, 220, 0.9)"),o.addColorStop(.6,"rgba(252, 252, 210, 0.7)"),o.addColorStop(.8,"rgba(255, 255, 150, 0.6)"),o.addColorStop(1,"rgba(255, 215, 0, 0)"),bgCtx.fillStyle=o,bgCtx.beginPath(),bgCtx.arc(t,i,2.5*h,0,2*Math.PI),bgCtx.fill()}function Cloud(){this.x=Math.random()*width,this.y=.35*height+(Math.random()**1.6-.5)*height*.35,this.size=40*Math.random()+40,this.speed=.1*Math.random()+.05,this.puffs=[];const t=Math.floor(30*Math.random())+30,i=2.5*this.size;this.buffer=document.createElement("canvas"),this.buffer.width=i,this.buffer.height=i;const h=this.buffer.getContext("2d");h.shadowColor="rgba(255, 255, 255, 0.3)",h.shadowBlur=30;for(let o=0;o<t;o++){const t=Math.random()*Math.PI*2,o=(1-Math.pow(Math.random(),2))*(this.size/1.2),e=i/2+Math.cos(t)*o*1.2,a=i/2+Math.sin(t)*o*.6,s=this.size/3+6*Math.random(),r=this.size/4+4*Math.random(),n=.3+.3*Math.random();h.fillStyle=`rgba(255, 255, 255, ${n})`,h.beginPath(),h.ellipse(e,a,s,r,0,0,2*Math.PI),h.fill(),this.puffs.push({x:e,y:a,rx:s,ry:r})}}function Bubble(){this.x=Math.random()*width,this.y=Math.random()*height,this.radius=20*Math.random()+5,this.speedX=-(.5*Math.random()+.1),this.offset=1e3*Math.random(),this.hueShift=360*Math.random()}function ShootingStar(){this.reset(-200)}function Star(){this.size=2*Math.random()+.1,this.x=Math.random()*width,this.y=Math.random()*height*.3,this.colour=starColour[Math.floor(Math.random()*starColour.length)]}function animate(){const t=performance.now();drawSky(),drawSea(),drawSun();for(let t of stars)t.update();for(let t of shootingstars)t.update();for(let t of clouds)t.update();for(let i of bubbles)i.update(t);requestAnimFrame(animate)}var requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},background=document.getElementById("bgCanvas"),bgCtx=background.getContext("2d"),width=window.innerWidth,height=document.body.offsetHeight;height<400&&(height=400),height=1080,width=1920;const starColour=["white","floralWhite","aliceBlue","powderBlue","azure","moccasin","sandyBrown","peachPuff"],namedColorRGB={white:[255,255,255],floralWhite:[255,250,240],aliceBlue:[240,248,255],powderBlue:[176,224,230],azure:[240,255,255],moccasin:[255,228,181],sandyBrown:[244,164,96],peachPuff:[255,218,185]};Cloud.prototype.update=function(){this.x-=this.speed,this.x<-this.buffer.width&&(this.x=width+this.buffer.width,this.y=.35*height+(Math.random()**1.6-.5)*height*.35),bgCtx.globalAlpha=1,bgCtx.drawImage(this.buffer,this.x,this.y-this.buffer.height/2)},Bubble.prototype.update=function(t){if(console.log("Bubble Params:",this.x,this.y,this.radius),isFinite(this.x)&&isFinite(this.y)&&isFinite(this.radius)){this.y+=.3*Math.sin(.002*(t+this.offset)),this.x+=this.speedX,this.x<-this.radius&&(this.x=width+this.radius,this.y=Math.random()*height);const i=bgCtx.createRadialGradient(this.x,this.y,0,this.x,this.y,this.radius);i.addColorStop(0,"rgba(255, 255, 255, 0.05)"),i.addColorStop(.4,`hsla(${this.hueShift}, 80%, 85%, 0.12)`),i.addColorStop(.7,`hsla(${(this.hueShift+120)%360}, 90%, 75%, 0.18)`),i.addColorStop(1,`hsla(${(this.hueShift+240)%360}, 100%, 80%, 0.4)`),bgCtx.save(),bgCtx.globalCompositeOperation="lighter",bgCtx.fillStyle=i,bgCtx.beginPath(),bgCtx.arc(this.x,this.y,this.radius,0,2*Math.PI),bgCtx.fill(),bgCtx.restore(),bgCtx.fillStyle="rgba(255, 255, 255, 0.25)",bgCtx.beginPath(),bgCtx.arc(this.x+this.radius/3,this.y-this.radius/3,this.radius/6,0,2*Math.PI),bgCtx.fill()}else console.error("Invalid bubble parameters:",this.x,this.y,this.radius)},ShootingStar.prototype.update=function(){if(bottom=.6*height,this.active)if(this.x-=this.speed,this.y+=this.speed,this.x<-this.len||this.y>=height+this.len)this.speed=0,this.reset();else{const t=this.x,i=this.y,h=this.x+this.len,o=this.y-this.len;if(i<bottom||o<bottom){let e=t,a=i,s=h,r=o;if(i>bottom){e=h+(t-h)*((bottom-o)/(i-o)),a=bottom}if(o>bottom){s=t+(h-t)*((bottom-i)/(o-i)),r=bottom}bgCtx.strokeStyle=this.colour,bgCtx.lineWidth=this.size,bgCtx.beginPath(),bgCtx.moveTo(e,a),bgCtx.lineTo(s,r),bgCtx.stroke()}}else this.waitTime<(new Date).getTime()&&(this.active=!0)},ShootingStar.prototype.reset=function(t="0"){var i=Math.random()*(width+height);this.y=Math.max(0,i-width),this.x="0"==t?Math.min(width,i):t,this.len=80*Math.random()+10,this.size=1*Math.random()+.1,this.speed=10*Math.random()+5,this.colour=starColour[Math.floor(Math.random()*starColour.length)],this.waitTime=(new Date).getTime()+2e4*Math.random(),this.active=!1},Star.prototype.update=function(){this.size=Math.max(.1,Math.min(2,this.size+.1*Math.random()-.05)),bgCtx.fillStyle=this.colour,bgCtx.fillRect(this.x,this.y,this.size,this.size)},background.width=width,background.height=height;for(var stars=[],shootingstars=[],clouds=[],bubbles=[],i=15;i>0;i--)clouds.push(new Cloud);for(i=30;i>0;i--)bubbles.push(new Bubble);for(i=10;i>0;i--)shootingstars.push(new ShootingStar);for(i=400;i>0;i--)stars.push(new Star);animate();