function today(t){var o=t.getDate(),i=t.getMonth()+1;return o<10&&(o="0"+o),i<10&&(i="0"+i),o+"/"+i}function lerp(t,o,i){return t+(o-t)*i}function drawSky(){const t=.7*height,o=bgCtx.createLinearGradient(0,0,0,t);o.addColorStop(0,"#0b0033"),o.addColorStop(.1,"#2e1a47"),o.addColorStop(.4,"#ff758c"),o.addColorStop(.7,"#ffd580"),o.addColorStop(.9,"#fff1a8"),o.addColorStop(1,"#ffe4b5"),bgCtx.fillStyle=o,bgCtx.fillRect(0,0,width,t)}function drawSea(){const t=.7*height,o=bgCtx.createLinearGradient(0,t,0,height);o.addColorStop(0,"#98f5e1"),o.addColorStop(.3,"#56cfe1"),o.addColorStop(.6,"#2d6cdf"),o.addColorStop(1,"#0b1a40"),bgCtx.fillStyle=o,bgCtx.fillRect(0,t,width,height-t)}function drawWaves(t){const o=.7*height,i=4;for(let e=0;e<i;e++){const i=6+2*e,a=.004+.0015*e,s=t*(.3+.1*e),r=o+10*e+2*Math.sin(s);bgCtx.beginPath(),bgCtx.moveTo(0,r);for(let t=0;t<=width;t+=2){const o=r+Math.sin(t*a+s)*i;bgCtx.lineTo(t,o)}bgCtx.strokeStyle="rgba(255, 255, 255, 0.6)",bgCtx.lineWidth=1.3+.4*e,bgCtx.stroke()}}function drawShimmer(){const t=width/2,o=.6*height+10,i=.95*height,e=60;bgCtx.save(),bgCtx.globalAlpha=.4,bgCtx.lineWidth=1;for(let a=0;a<e;a++){const s=a/e,r=lerp(o,i,s),h=300*Math.sin(s*Math.PI)/2,n=4*(Math.random()-.5),d=t-h+n,l=t+h+n,g=bgCtx.createLinearGradient(d,r,l,r);g.addColorStop(0,"rgba(255, 223, 100, 0)"),g.addColorStop(.5,"rgba(255, 240, 180, 0.8)"),g.addColorStop(1,"rgba(255, 223, 100, 0)"),bgCtx.strokeStyle=g,bgCtx.beginPath(),bgCtx.moveTo(d,r),bgCtx.lineTo(l,r),bgCtx.stroke()}bgCtx.restore()}function drawSun(){const t=width/2,o=.6*height,i=40,e=bgCtx.createRadialGradient(t,o,0,t,o,2.5*i);e.addColorStop(0,"rgba(255, 255, 220, 0.9)"),e.addColorStop(.6,"rgba(252, 252, 210, 0.7)"),e.addColorStop(.8,"rgba(255, 255, 150, 0.6)"),e.addColorStop(1,"rgba(255, 215, 0, 0)"),bgCtx.fillStyle=e,bgCtx.beginPath(),bgCtx.arc(t,o,2.5*i,0,2*Math.PI),bgCtx.fill()}function Cloud(){this.x=Math.random()*width,this.y=.35*height+(Math.random()**1.6-.5)*height*.35,this.size=40*Math.random()+40,this.speed=.1*Math.random()+.05,this.puffs=[];const t=Math.floor(30*Math.random())+30,o=2.5*this.size;this.buffer=document.createElement("canvas"),this.buffer.width=o,this.buffer.height=o;const i=this.buffer.getContext("2d");i.shadowColor="rgba(255, 255, 255, 0.3)",i.shadowBlur=30;for(let e=0;e<t;e++){const t=Math.random()*Math.PI*2,e=Math.random()*(this.size/2),a=o/2+Math.cos(t)*e,s=o/2+Math.sin(t)*e,r=this.size/3+6*Math.random(),h=this.size/4+4*Math.random(),n=.3+.3*Math.random();i.fillStyle=`rgba(255, 255, 255, ${n})`,i.beginPath(),i.ellipse(a,s,r,h,0,0,2*Math.PI),i.fill(),this.puffs.push({x:a,y:s,rx:r,ry:h})}}function Bubble(){this.x=Math.random()*width,this.y=Math.random()*height,this.radius=20*Math.random()+5,this.speedX=-(.5*Math.random()+.1),this.offset=1e3*Math.random(),this.hueShift=360*Math.random()}function ShootingStar(){this.reset(-200)}function Star(t,o,i,e,a=!1){this.x=t||Math.random()*width,this.y=o||Math.random()**2*height*.3,this.size=i||2*Math.random()+.1,this.colour=e||starColour[Math.floor(Math.random()*starColour.length)],this.isConstellation=a}function drawConstellationLines(t,o){bgCtx.beginPath(),o.forEach(o=>{const i=t[o.from],e=t[o.to];bgCtx.moveTo(i.x,i.y),bgCtx.lineTo(e.x,e.y)}),bgCtx.strokeStyle="rgba(255, 255, 255, 0.1)",bgCtx.lineWidth=1.5,bgCtx.stroke()}function raDeg(t,o=0,i=0){return 15*(t+o/60+i/3600)}function DecDeg(t,o=0,i=0){return(t<0?-1:1)*(Math.abs(t)+o/60+i/3600)}function animate(){const t=performance.now();drawSky();for(let t of stars)t.update();drawConstellationLines(orionStars,orionConnections),drawConstellationLines(cassiopeiaStars,cassiopeiaConnections),drawSea(),drawWaves(t),drawShimmer(),drawSun();for(let t of shootingstars)t.update();for(let t of clouds)t.update();for(let o of bubbles)o.update(t);requestAnimFrame(animate)}var requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},background=document.getElementById("bgCanvas"),bgCtx=background.getContext("2d"),width=window.innerWidth,height=document.body.offsetHeight;height<400&&(height=400),height=1080,width=1920;const starColour=["white","floralWhite","aliceBlue","powderBlue","azure","moccasin","sandyBrown","peachPuff"];Cloud.prototype.update=function(){this.x-=this.speed,this.x<-this.buffer.width&&(this.x=width+this.buffer.width,this.y=.35*height+(Math.random()**1.6-.5)*height*.35),bgCtx.globalAlpha=.7,bgCtx.drawImage(this.buffer,this.x,this.y-this.buffer.height/2)},Bubble.prototype.update=function(t){if(isFinite(this.x)&&isFinite(this.y)&&isFinite(this.radius)){this.y+=.3*Math.sin(.002*(t+this.offset)),this.x+=this.speedX,this.x<-this.radius&&(this.x=width+this.radius,this.y=Math.random()*height);const o=bgCtx.createRadialGradient(this.x,this.y,0,this.x,this.y,this.radius);o.addColorStop(0,"rgba(255, 255, 255, 0.05)"),o.addColorStop(.4,`hsla(${this.hueShift}, 80%, 85%, 0.12)`),o.addColorStop(.7,`hsla(${(this.hueShift+120)%360}, 90%, 75%, 0.18)`),o.addColorStop(1,`hsla(${(this.hueShift+240)%360}, 100%, 80%, 0.4)`),bgCtx.save(),bgCtx.globalCompositeOperation="lighter",bgCtx.fillStyle=o,bgCtx.beginPath(),bgCtx.arc(this.x,this.y,this.radius,0,2*Math.PI),bgCtx.fill(),bgCtx.restore(),bgCtx.fillStyle="rgba(255, 255, 255, 0.25)",bgCtx.beginPath(),bgCtx.arc(this.x+this.radius/3,this.y-this.radius/3,this.radius/6,0,2*Math.PI),bgCtx.fill()}else console.error("Invalid bubble parameters:",this.x,this.y,this.radius)},ShootingStar.prototype.update=function(){if(bottom=.7*height,this.active)if(this.x-=this.speed,this.y+=this.speed,this.x<-this.len||this.y>=height+this.len)this.speed=0,this.reset();else{const t=this.x,o=this.y,i=this.x+this.len,e=this.y-this.len;if(o<bottom||e<bottom){let a=t,s=o,r=i,h=e;if(o>bottom){a=i+(t-i)*((bottom-e)/(o-e)),s=bottom}if(e>bottom){r=t+(i-t)*((bottom-o)/(e-o)),h=bottom}bgCtx.strokeStyle=this.colour,bgCtx.lineWidth=this.size,bgCtx.beginPath(),bgCtx.moveTo(a,s),bgCtx.lineTo(r,h),bgCtx.stroke()}}else this.waitTime<(new Date).getTime()&&(this.active=!0)},ShootingStar.prototype.reset=function(t="0"){var o=Math.random()*(width+height);this.y=Math.max(0,o-width),this.x="0"==t?Math.min(width,o):t,this.len=80*Math.random()+10,this.size=1*Math.random()+.1,this.speed=10*Math.random()+5,this.colour=starColour[Math.floor(Math.random()*starColour.length)],this.waitTime=(new Date).getTime()+2e4*Math.random(),this.active=!1},Star.prototype.update=function(){this.drawGlow(),this.size=Math.max(this.isConstellation?.75:.1,Math.min(2,this.size+.1*Math.random()-.05)),bgCtx.fillStyle=this.colour,bgCtx.fillRect(this.x,this.y,this.size,this.size)},Star.prototype.drawGlow=function(){this.isConstellation&&(bgCtx.save(),bgCtx.globalAlpha=.8,bgCtx.shadowColor=this.colour,bgCtx.shadowBlur=15,bgCtx.fillStyle=this.colour,bgCtx.beginPath(),bgCtx.arc(this.x,this.y,3,0,2*Math.PI),bgCtx.fill(),bgCtx.restore())},background.width=width,background.height=height;for(var stars=[],shootingstars=[],clouds=[],bubbles=[],i=15;i>0;i--)clouds.push(new Cloud);for(i=30;i>0;i--)bubbles.push(new Bubble);for(i=10;i>0;i--)shootingstars.push(new ShootingStar);for(i=600;i>0;i--)stars.push(new Star);const orionX=2400,orionY=200,orionH=-8,orionW=orionH,orionStars=[new Star(orionX+orionW*raDeg(5,55,10.30536),orionY+orionH*DecDeg(7,24,25.4304),2,"sandyBrown",!0),new Star(orionX+orionW*raDeg(5,25,7.86325),orionY+orionH*DecDeg(6,20,58.9318),1.8,"powderBlue",!0),new Star(orionX+orionW*raDeg(5,36,12.8),orionY+orionH*DecDeg(-1,12,6.9),1.5,"aliceBlue",!0),new Star(orionX+orionW*raDeg(5,32,.40009),orionY+orionH*DecDeg(-0,17,56.7424),1.3,"aliceBlue",!0),new Star(orionX+orionW*raDeg(5,47,45.39994),orionY+orionH*DecDeg(-9,40,10.5777),1.7,"azure",!0),new Star(orionX+orionW*raDeg(5,14,32.2721),orionY+orionH*DecDeg(-8,12,5.8981),1.6,"powderBlue",!0),new Star(orionX+orionW*raDeg(5,40,45.52666),orionY+orionH*DecDeg(-1,56,34.2649),1.4,"azure",!0),new Star(orionX+orionW*raDeg(5,35,8.27608),orionY+orionH*DecDeg(9,56,2.9913),1.2,"white",!0)],cassX=400,cassY=600,cassH=-8,cassW=-4,cassiopeiaStars=[new Star(cassX+cassW*raDeg(0,40,30.4411),cassY+cassH*DecDeg(56,32,14.392),1.8,"moccasin",!0),new Star(cassX+cassW*raDeg(0,9,10.68518),cassY+cassH*DecDeg(59,8,59.212),1.7,"aliceBlue",!0),new Star(cassX+cassW*raDeg(0,56,42.50108),cassY+cassH*DecDeg(60,43,.2984),1.5,"powderBlue",!0),new Star(cassX+cassW*raDeg(1,25,48.95147),cassY+cassH*DecDeg(60,14,7.0225),1.4,"floraWhite",!0),new Star(cassX+cassW*raDeg(1,54,23.73409),cassY+cassH*DecDeg(63,40,12.3602),1.6,"azure",!0)];for(let t of orionStars)stars.push(t);for(let t of cassiopeiaStars)stars.push(t);const orionConnections=[{from:0,to:1},{from:0,to:6},{from:0,to:7},{from:1,to:3},{from:1,to:7},{from:2,to:3},{from:2,to:6},{from:3,to:5},{from:4,to:6}],cassiopeiaConnections=[{from:0,to:1},{from:0,to:2},{from:2,to:3},{from:3,to:4}];animate();