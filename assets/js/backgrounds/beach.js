function today(t){var i=t.getDate(),o=t.getMonth()+1;return i<10&&(i="0"+i),o<10&&(o="0"+o),i+"/"+o}function lerp(t,i,o){return t+(i-t)*o}function drawSky(){const t=.7*height,i=bgCtx.createLinearGradient(0,0,0,t);i.addColorStop(0,"#0b0033"),i.addColorStop(.1,"#2e1a47"),i.addColorStop(.4,"#ff758c"),i.addColorStop(.7,"#ffd580"),i.addColorStop(.9,"#fff1a8"),i.addColorStop(1,"#ffe4b5"),bgCtx.fillStyle=i,bgCtx.fillRect(0,0,width,t)}function drawSea(){const t=.7*height,i=bgCtx.createLinearGradient(0,t,0,height);i.addColorStop(0,"#98f5e1"),i.addColorStop(.3,"#56cfe1"),i.addColorStop(.6,"#2d6cdf"),i.addColorStop(1,"#0b1a40"),bgCtx.fillStyle=i,bgCtx.fillRect(0,t,width,height-t)}function drawSun(){const t=width/2,i=.6*height,o=40,e=bgCtx.createRadialGradient(t,i,0,t,i,2.5*o);e.addColorStop(0,"rgba(255, 255, 220, 0.9)"),e.addColorStop(.6,"rgba(252, 252, 210, 0.7)"),e.addColorStop(.8,"rgba(255, 255, 150, 0.6)"),e.addColorStop(1,"rgba(255, 215, 0, 0)"),bgCtx.fillStyle=e,bgCtx.beginPath(),bgCtx.arc(t,i,2.5*o,0,2*Math.PI),bgCtx.fill()}function Cloud(){this.x=Math.random()*width,this.y=.35*height+(Math.random()**1.6-.5)*height*.35,this.size=40*Math.random()+40,this.speed=.1*Math.random()+.05,this.puffs=[];const t=Math.floor(30*Math.random())+30,i=2.5*this.size;this.buffer=document.createElement("canvas"),this.buffer.width=i,this.buffer.height=i;const o=this.buffer.getContext("2d");o.shadowColor="rgba(255, 255, 255, 0.3)",o.shadowBlur=30;for(let e=0;e<t;e++){const t=Math.random()*Math.PI*2,e=Math.random()*(this.size/2),a=i/2+Math.cos(t)*e,s=i/2+Math.sin(t)*e,h=this.size/3+6*Math.random(),r=this.size/4+4*Math.random(),n=.3+.3*Math.random();o.fillStyle=`rgba(255, 255, 255, ${n})`,o.beginPath(),o.ellipse(a,s,h,r,0,0,2*Math.PI),o.fill(),this.puffs.push({x:a,y:s,rx:h,ry:r})}}function Bubble(){this.x=Math.random()*width,this.y=Math.random()*height,this.radius=20*Math.random()+5,this.speedX=-(.5*Math.random()+.1),this.offset=1e3*Math.random(),this.hueShift=360*Math.random()}function ShootingStar(){this.reset(-200)}function Star(t,i,o,e,a=!1){this.x=t||Math.random()*width,this.y=i||Math.random()*height*.3,this.size=o||2*Math.random()+.1,this.colour=e||starColour[Math.floor(Math.random()*starColour.length)],this.isConstellation=a}function drawConstellationLines(t,i){bgCtx.beginPath(),i.forEach(i=>{const o=t[i.from],e=t[i.to];bgCtx.moveTo(o.x,o.y),bgCtx.lineTo(e.x,e.y)}),bgCtx.strokeStyle="rgba(255, 255, 255, 0.8)",bgCtx.lineWidth=1.5,bgCtx.stroke()}function animate(){const t=performance.now();drawSky();for(let t of stars)t.update();drawConstellationLines(orionStars,orionConnections),drawConstellationLines(cassiopeiaStars,cassiopeiaConnections),drawSea(),drawSun();for(let t of shootingstars)t.update();for(let t of clouds)t.update();for(let i of bubbles)i.update(t);requestAnimFrame(animate)}var requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},background=document.getElementById("bgCanvas"),bgCtx=background.getContext("2d"),width=window.innerWidth,height=document.body.offsetHeight;height<400&&(height=400),height=1080,width=1920;const starColour=["white","floralWhite","aliceBlue","powderBlue","azure","moccasin","sandyBrown","peachPuff"];Cloud.prototype.update=function(){this.x-=this.speed,this.x<-this.buffer.width&&(this.x=width+this.buffer.width,this.y=.35*height+(Math.random()**1.6-.5)*height*.35),bgCtx.globalAlpha=.7,bgCtx.drawImage(this.buffer,this.x,this.y-this.buffer.height/2)},Bubble.prototype.update=function(t){if(isFinite(this.x)&&isFinite(this.y)&&isFinite(this.radius)){this.y+=.3*Math.sin(.002*(t+this.offset)),this.x+=this.speedX,this.x<-this.radius&&(this.x=width+this.radius,this.y=Math.random()*height);const i=bgCtx.createRadialGradient(this.x,this.y,0,this.x,this.y,this.radius);i.addColorStop(0,"rgba(255, 255, 255, 0.05)"),i.addColorStop(.4,`hsla(${this.hueShift}, 80%, 85%, 0.12)`),i.addColorStop(.7,`hsla(${(this.hueShift+120)%360}, 90%, 75%, 0.18)`),i.addColorStop(1,`hsla(${(this.hueShift+240)%360}, 100%, 80%, 0.4)`),bgCtx.save(),bgCtx.globalCompositeOperation="lighter",bgCtx.fillStyle=i,bgCtx.beginPath(),bgCtx.arc(this.x,this.y,this.radius,0,2*Math.PI),bgCtx.fill(),bgCtx.restore(),bgCtx.fillStyle="rgba(255, 255, 255, 0.25)",bgCtx.beginPath(),bgCtx.arc(this.x+this.radius/3,this.y-this.radius/3,this.radius/6,0,2*Math.PI),bgCtx.fill()}else console.error("Invalid bubble parameters:",this.x,this.y,this.radius)},ShootingStar.prototype.update=function(){if(bottom=.6*height,this.active)if(this.x-=this.speed,this.y+=this.speed,this.x<-this.len||this.y>=height+this.len)this.speed=0,this.reset();else{const t=this.x,i=this.y,o=this.x+this.len,e=this.y-this.len;if(i<bottom||e<bottom){let a=t,s=i,h=o,r=e;if(i>bottom){a=o+(t-o)*((bottom-e)/(i-e)),s=bottom}if(e>bottom){h=t+(o-t)*((bottom-i)/(e-i)),r=bottom}bgCtx.strokeStyle=this.colour,bgCtx.lineWidth=this.size,bgCtx.beginPath(),bgCtx.moveTo(a,s),bgCtx.lineTo(h,r),bgCtx.stroke()}}else this.waitTime<(new Date).getTime()&&(this.active=!0)},ShootingStar.prototype.reset=function(t="0"){var i=Math.random()*(width+height);this.y=Math.max(0,i-width),this.x="0"==t?Math.min(width,i):t,this.len=80*Math.random()+10,this.size=1*Math.random()+.1,this.speed=10*Math.random()+5,this.colour=starColour[Math.floor(Math.random()*starColour.length)],this.waitTime=(new Date).getTime()+2e4*Math.random(),this.active=!1},Star.prototype.update=function(){this.size=Math.max(.1,Math.min(2,this.size+.1*Math.random()-.05)),bgCtx.fillStyle=this.colour,bgCtx.fillRect(this.x,this.y,this.size,this.size),this.drawGlow()},Star.prototype.drawGlow=function(){this.isConstellation&&(bgCtx.save(),bgCtx.globalAlpha=.6,bgCtx.shadowColor=this.colour,bgCtx.shadowBlur=15,bgCtx.fillStyle=this.colour,bgCtx.beginPath(),bgCtx.arc(this.x,this.y,1.5*this.size,0,2*Math.PI),bgCtx.fill(),bgCtx.restore())},background.width=width,background.height=height;for(var stars=[],shootingstars=[],clouds=[],bubbles=[],i=15;i>0;i--)clouds.push(new Cloud);for(i=30;i>0;i--)bubbles.push(new Bubble);for(i=10;i>0;i--)shootingstars.push(new ShootingStar);for(i=400;i>0;i--)stars.push(new Star);const orionStars=[new Star(83.63,7.407,2,"sandyBrown",!0),new Star(81.28,6.349,1.8,"powderBlue",!0),new Star(84.05,-1.194,1.5,"aliceBlue",!0),new Star(83,-.299,1.3,"aliceBlue",!0),new Star(86.95,-9.278,1.7,"azure",!0),new Star(80.13,-8.201,1.6,"powderBlue",!0),new Star(85.11,-1.942,1.4,"azure",!0),new Star(77.33,4.817,1.2,"white",!0)],cassiopeiaStars=[new Star(.959,56.53,1.8,"moccasin",!0),new Star(1.597,59.12,1.7,"aliceBlue",!0),new Star(1.777,56.53,1.5,"powderBlue",!0),new Star(2.296,60.72,1.4,"floraWhite",!0),new Star(1.842,61.57,1.6,"azure",!0)];for(let t of orionStars)stars.push(t);for(let t of cassiopeiaStars)stars.push(t);const orionConnections=[{from:0,to:1},{from:0,to:6},{from:0,to:7},{from:1,to:3},{from:1,to:7},{from:2,to:3},{from:2,to:6},{from:3,to:5},{from:4,to:6}],cassiopeiaConnections=[{from:0,to:1},{from:0,to:2},{from:2,to:3},{from:3,to:4}];animate();